!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var n=/\+/g;function t(e){return s.raw?e:encodeURIComponent(e)}function o(e){return t(s.json?JSON.stringify(e):String(e))}function i(t,o){var i=s.raw?t:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(n," ")),s.json?JSON.parse(e):e}catch(e){}}(t);return e.isFunction(o)?o(i):i}var s=e.cookie=function(n,a,r){if(arguments.length>1&&!e.isFunction(a)){if("number"==typeof(r=e.extend({},s.defaults,r)).expires){var c=r.expires,d=r.expires=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*c)}return document.cookie=[t(n),"=",o(a),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}for(var l,u=n?void 0:{},m=document.cookie?document.cookie.split("; "):[],f=0,p=m.length;f<p;f++){var y=m[f].split("="),v=(l=y.shift(),s.raw?l:decodeURIComponent(l)),g=y.join("=");if(n===v){u=i(g,a);break}n||void 0===(g=i(g))||(u[v]=g)}return u};s.defaults={},e.removeCookie=function(n,t){return e.cookie(n,"",e.extend({},t,{expires:-1})),!e.cookie(n)}}),function(){var e,n,t,o,i,s,a;if(e=document.getElementsByTagName("body"),(n=document.getElementById("site-navigation"))&&void 0!==(t=n.getElementsByTagName("button")[0]))if(void 0!==(o=n.getElementsByClassName("nav-inner")[0])){for(o.setAttribute("aria-expanded","false"),-1===o.className.indexOf("nav-menu")&&(o.className+=" nav-menu"),t.onclick=function(){-1!==n.className.indexOf("toggled")?(e[0].classList.contains("menu-open")&&e[0].classList.remove("menu-open"),n.className=n.className.replace(" toggled",""),t.setAttribute("aria-expanded","false"),o.setAttribute("aria-expanded","false")):(e[0].classList.add("menu-open"),n.className+=" toggled",t.setAttribute("aria-expanded","true"),o.setAttribute("aria-expanded","true"))},s=0,a=(i=o.getElementsByTagName("a")).length;s<a;s++)i[s].addEventListener("focus",r,!0),i[s].addEventListener("blur",r,!0);!function(e){var n,t,o=e.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");if("ontouchstart"in window)for(n=function(e){var n,t=this.parentNode;if(t.classList.contains("focus"))t.classList.remove("focus");else{for(e.preventDefault(),n=0;n<t.parentNode.children.length;++n)t!==t.parentNode.children[n]&&t.parentNode.children[n].classList.remove("focus");t.classList.add("focus")}},t=0;t<o.length;++t)o[t].addEventListener("touchstart",n,!1)}(n)}else t.style.display="none";function r(){for(var e=this;-1===e.className.indexOf("nav-menu");)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement}}(),jQuery(document).ready(function(e){var n=0;currentScrollPosition=e(window).scrollTop(),currentScrollPosition>120?e("body").addClass("sticky-menu"):e("body").removeClass("sticky-menu"),n=currentScrollPosition,e(window).scroll(function(){currentScrollPosition=e(window).scrollTop(),currentScrollPosition>120?e("body").addClass("sticky-menu"):e("body").removeClass("sticky-menu"),currentScrollPosition>n?(jQuery("body").removeClass("scroll-up"),jQuery("body").addClass("scroll-down")):(jQuery("body").removeClass("scroll-down"),jQuery("body").addClass("scroll-up")),n=currentScrollPosition})}),/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,n=location.hash.substring(1);/^[A-z0-9_-]+$/.test(n)&&(e=document.getElementById(n))&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1),jQuery(document).ready(function(e){location.hash&&(location.href=location.hash),"hidden"!=jQuery.cookie("hidecookie")&&e("#cookiebanner").removeClass("hidden"),"hidden"!=jQuery.cookie("hidepopup")&&e("#popup").removeClass("hidden"),e("#cookiebanner button").click(function(n){var t=new Date;t.setTime(t.getTime()+31104e6),document.cookie="hidecookie=hidden; expires="+t.toGMTString(),e("#cookiebanner").addClass("hidden")})}),jQuery(".menu-anchor a").click(function(){event.preventDefault();var e=jQuery(this).attr("href");jQuery("#site-navigation").removeClass("toggled"),jQuery("body").removeClass("menu-toggled"),jQuery([document.documentElement,document.body]).animate({scrollTop:jQuery(e).offset().top},500).delay(200),jQuery("body").removeClass("menu-open")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5jb29raWUuanMiLCJuYXZpZ2F0aW9uLmpzIiwic3RpY2t5LW1lbnUuanMiLCJza2lwLWxpbmstZm9jdXMtZml4LmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJqUXVlcnkiLCIkIiwicGx1c2VzIiwiZW5jb2RlIiwicyIsImNvbmZpZyIsInJhdyIsImVuY29kZVVSSUNvbXBvbmVudCIsInN0cmluZ2lmeUNvb2tpZVZhbHVlIiwidmFsdWUiLCJqc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsIlN0cmluZyIsInJlYWQiLCJjb252ZXJ0ZXIiLCJpbmRleE9mIiwic2xpY2UiLCJyZXBsYWNlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFyc2UiLCJlIiwicGFyc2VDb29raWVWYWx1ZSIsImlzRnVuY3Rpb24iLCJjb29raWUiLCJrZXkiLCJvcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJleHBpcmVzIiwiZGF5cyIsInQiLCJEYXRlIiwic2V0TWlsbGlzZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwiZG9jdW1lbnQiLCJ0b1VUQ1N0cmluZyIsInBhdGgiLCJkb21haW4iLCJzZWN1cmUiLCJqb2luIiwicmVzdWx0IiwidW5kZWZpbmVkIiwiY29va2llcyIsInNwbGl0IiwiaSIsImwiLCJwYXJ0cyIsIm5hbWUiLCJzaGlmdCIsInJlbW92ZUNvb2tpZSIsInBhZ2VCb2R5IiwiY29udGFpbmVyIiwiYnV0dG9uIiwibWVudSIsImxpbmtzIiwibGVuIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc05hbWUiLCJvbmNsaWNrIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlRm9jdXMiLCJ0b3VjaFN0YXJ0Rm4iLCJwYXJlbnRMaW5rIiwicXVlcnlTZWxlY3RvckFsbCIsIndpbmRvdyIsIm1lbnVJdGVtIiwidGhpcyIsInBhcmVudE5vZGUiLCJwcmV2ZW50RGVmYXVsdCIsImNoaWxkcmVuIiwic3R5bGUiLCJkaXNwbGF5Iiwic2VsZiIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInBhcmVudEVsZW1lbnQiLCJyZWFkeSIsImxhc3RTY3JvbGxQb3NpdGlvbiIsImN1cnJlbnRTY3JvbGxQb3NpdGlvbiIsInNjcm9sbFRvcCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzY3JvbGwiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZWxlbWVudCIsImlkIiwibG9jYXRpb24iLCJoYXNoIiwic3Vic3RyaW5nIiwidGFiSW5kZXgiLCJmb2N1cyIsImhyZWYiLCJjbGljayIsImV2ZW50IiwiZGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwidG9HTVRTdHJpbmciLCJhdHRyIiwiZG9jdW1lbnRFbGVtZW50IiwiYm9keSIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJkZWxheSJdLCJtYXBwaW5ncyI6IkNBT0MsU0FBVUEsR0FDWSxtQkFBWEMsUUFBeUJBLE9BQU9DLElBRTFDRCxPQUFPLENBQUMsVUFBV0QsR0FDVSxpQkFBWkcsUUFFakJDLE9BQU9ELFFBQVVILEVBQVFLLFFBQVEsV0FHakNMLEVBQVFNLFFBVFYsQ0FXRSxTQUFVQyxHQUVYLElBQUlDLEVBQVMsTUFFYixTQUFTQyxFQUFPQyxHQUNmLE9BQU9DLEVBQU9DLElBQU1GLEVBQUlHLG1CQUFtQkgsR0FPNUMsU0FBU0ksRUFBcUJDLEdBQzdCLE9BQU9OLEVBQU9FLEVBQU9LLEtBQU9DLEtBQUtDLFVBQVVILEdBQVNJLE9BQU9KLElBa0I1RCxTQUFTSyxFQUFLVixFQUFHVyxHQUNoQixJQUFJTixFQUFRSixFQUFPQyxJQUFNRixFQWhCMUIsU0FBMEJBLEdBQ0YsSUFBbkJBLEVBQUVZLFFB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RyxjQUV0RTVHLEVBQUUsaUJBQWlCeUYsU0FBUyxjQWFsQzFGLE9BQU8sa0JBQWtCd0csTUFBTSxXQUMzQkMsTUFBTTNCLGlCQUNOLElBQUlILEVBQVczRSxPQUFPNEUsTUFBTWtDLEtBQUssUUFFakM5RyxPQUFPLG9CQUFvQjJGLFlBQVksV0FDdkMzRixPQUFPLFFBQVEyRixZQUFZLGdCQUUzQjNGLE9BQU8sQ0FBQ3FDLFNBQVMwRSxnQkFBaUIxRSxTQUFTMkUsT0FBT0MsUUFBUSxDQUN0RHhCLFVBQVd6RixPQUFPMkUsR0FBVXVDLFNBQVNDLEtBQ3RDLEtBQUtDLE1BQU0sS0FFZHBILE9BQU8sUUFBUTJGLFlBQVkiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGpRdWVyeSBDb29raWUgUGx1Z2luIHYxLjQuMVxuICogaHR0cHM6Ly9naXRodWIuY29tL2NhcmhhcnRsL2pxdWVyeS1jb29raWVcbiAqXG4gKiBDb3B5cmlnaHQgMjAwNiwgMjAxNCBLbGF1cyBIYXJ0bFxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gQU1EIChSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlKVxuXHRcdGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcblx0XHQvLyBOb2RlL0NvbW1vbkpTXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcblx0fSBlbHNlIHtcblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcblx0XHRmYWN0b3J5KGpRdWVyeSk7XG5cdH1cbn0oZnVuY3Rpb24gKCQpIHtcblxuXHR2YXIgcGx1c2VzID0gL1xcKy9nO1xuXG5cdGZ1bmN0aW9uIGVuY29kZShzKSB7XG5cdFx0cmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZW5jb2RlVVJJQ29tcG9uZW50KHMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVjb2RlKHMpIHtcblx0XHRyZXR1cm4gY29uZmlnLnJhdyA/IHMgOiBkZWNvZGVVUklDb21wb25lbnQocyk7XG5cdH1cblxuXHRmdW5jdGlvbiBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZSkge1xuXHRcdHJldHVybiBlbmNvZGUoY29uZmlnLmpzb24gPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiBTdHJpbmcodmFsdWUpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlQ29va2llVmFsdWUocykge1xuXHRcdGlmIChzLmluZGV4T2YoJ1wiJykgPT09IDApIHtcblx0XHRcdC8vIFRoaXMgaXMgYSBxdW90ZWQgY29va2llIGFzIGFjY29yZGluZyB0byBSRkMyMDY4LCB1bmVzY2FwZS4uLlxuXHRcdFx0cyA9IHMuc2xpY2UoMSwgLTEpLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKS5yZXBsYWNlKC9cXFxcXFxcXC9nLCAnXFxcXCcpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBSZXBsYWNlIHNlcnZlci1zaWRlIHdyaXR0ZW4gcGx1c2VzIHdpdGggc3BhY2VzLlxuXHRcdFx0Ly8gSWYgd2UgY2FuJ3QgZGVjb2RlIHRoZSBjb29raWUsIGlnbm9yZSBpdCwgaXQncyB1bnVzYWJsZS5cblx0XHRcdC8vIElmIHdlIGNhbid0IHBhcnNlIHRoZSBjb29raWUsIGlnbm9yZSBpdCwgaXQncyB1bnVzYWJsZS5cblx0XHRcdHMgPSBkZWNvZGVVUklDb21wb25lbnQocy5yZXBsYWNlKHBsdXNlcywgJyAnKSk7XG5cdFx0XHRyZXR1cm4gY29uZmlnLmpzb24gPyBKU09OLnBhcnNlKHMpIDogcztcblx0XHR9IGNhdGNoKGUpIHt9XG5cdH1cblxuXHRmdW5jdGlvbiByZWFkKHMsIGNvbnZlcnRlcikge1xuXHRcdHZhciB2YWx1ZSA9IGNvbmZpZy5yYXcgPyBzIDogcGFyc2VDb29raWVWYWx1ZShzKTtcblx0XHRyZXR1cm4gJC5pc0Z1bmN0aW9uKGNvbnZlcnRlcikgPyBjb252ZXJ0ZXIodmFsdWUpIDogdmFsdWU7XG5cdH1cblxuXHR2YXIgY29uZmlnID0gJC5jb29raWUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgb3B0aW9ucykge1xuXG5cdFx0Ly8gV3JpdGVcblxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiAhJC5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuXHRcdFx0b3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBjb25maWcuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG5cdFx0XHRpZiAodHlwZW9mIG9wdGlvbnMuZXhwaXJlcyA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0dmFyIGRheXMgPSBvcHRpb25zLmV4cGlyZXMsIHQgPSBvcHRpb25zLmV4cGlyZXMgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0XHR0LnNldE1pbGxpc2Vjb25kcyh0LmdldE1pbGxpc2Vjb25kcygpICsgZGF5cyAqIDg2NGUrNSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAoZG9jdW1lbnQuY29va2llID0gW1xuXHRcdFx0XHRlbmNvZGUoa2V5KSwgJz0nLCBzdHJpbmdpZnlDb29raWVWYWx1ZSh2YWx1ZSksXG5cdFx0XHRcdG9wdGlvbnMuZXhwaXJlcyA/ICc7IGV4cGlyZXM9JyArIG9wdGlvbnMuZXhwaXJlcy50b1VUQ1N0cmluZygpIDogJycsIC8vIHVzZSBleHBpcmVzIGF0dHJpYnV0ZSwgbWF4LWFnZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXG5cdFx0XHRcdG9wdGlvbnMucGF0aCAgICA/ICc7IHBhdGg9JyArIG9wdGlvbnMucGF0aCA6ICcnLFxuXHRcdFx0XHRvcHRpb25zLmRvbWFpbiAgPyAnOyBkb21haW49JyArIG9wdGlvbnMuZG9tYWluIDogJycsXG5cdFx0XHRcdG9wdGlvbnMuc2VjdXJlICA/ICc7IHNlY3VyZScgOiAnJ1xuXHRcdFx0XS5qb2luKCcnKSk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVhZFxuXG5cdFx0dmFyIHJlc3VsdCA9IGtleSA/IHVuZGVmaW5lZCA6IHt9LFxuXHRcdFx0Ly8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheVxuXHRcdFx0Ly8gaW4gY2FzZSB0aGVyZSBhcmUgbm8gY29va2llcyBhdCBhbGwuIEFsc28gcHJldmVudHMgb2RkIHJlc3VsdCB3aGVuXG5cdFx0XHQvLyBjYWxsaW5nICQuY29va2llKCkuXG5cdFx0XHRjb29raWVzID0gZG9jdW1lbnQuY29va2llID8gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpIDogW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSBjb29raWVzLmxlbmd0aDtcblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR2YXIgcGFydHMgPSBjb29raWVzW2ldLnNwbGl0KCc9JyksXG5cdFx0XHRcdG5hbWUgPSBkZWNvZGUocGFydHMuc2hpZnQoKSksXG5cdFx0XHRcdGNvb2tpZSA9IHBhcnRzLmpvaW4oJz0nKTtcblxuXHRcdFx0aWYgKGtleSA9PT0gbmFtZSkge1xuXHRcdFx0XHQvLyBJZiBzZWNvbmQgYXJndW1lbnQgKHZhbHVlKSBpcyBhIGZ1bmN0aW9uIGl0J3MgYSBjb252ZXJ0ZXIuLi5cblx0XHRcdFx0cmVzdWx0ID0gcmVhZChjb29raWUsIHZhbHVlKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByZXZlbnQgc3RvcmluZyBhIGNvb2tpZSB0aGF0IHdlIGNvdWxkbid0IGRlY29kZS5cblx0XHRcdGlmICgha2V5ICYmIChjb29raWUgPSByZWFkKGNvb2tpZSkpICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0cmVzdWx0W25hbWVdID0gY29va2llO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG5cblx0Y29uZmlnLmRlZmF1bHRzID0ge307XG5cblx0JC5yZW1vdmVDb29raWUgPSBmdW5jdGlvbiAoa2V5LCBvcHRpb25zKSB7XG5cdFx0Ly8gTXVzdCBub3QgYWx0ZXIgb3B0aW9ucywgdGh1cyBleHRlbmRpbmcgYSBmcmVzaCBvYmplY3QuLi5cblx0XHQkLmNvb2tpZShrZXksICcnLCAkLmV4dGVuZCh7fSwgb3B0aW9ucywgeyBleHBpcmVzOiAtMSB9KSk7XG5cdFx0cmV0dXJuICEkLmNvb2tpZShrZXkpO1xuXHR9O1xuXG59KSk7XG4iLCIvKipcclxuICogRmlsZSBuYXZpZ2F0aW9uLmpzLlxyXG4gKlxyXG4gKiBIYW5kbGVzIHRvZ2dsaW5nIHRoZSBuYXZpZ2F0aW9uIG1lbnUgZm9yIHNtYWxsIHNjcmVlbnMgYW5kIGVuYWJsZXMgVEFCIGtleVxyXG4gKiBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yIGRyb3Bkb3duIG1lbnVzLlxyXG4gKi9cclxuKCBmdW5jdGlvbigpIHtcclxuXHR2YXIgcGFnZUJvZHksIGNvbnRhaW5lciwgYnV0dG9uLCBtZW51LCBsaW5rcywgaSwgbGVuO1xyXG5cclxuXHRwYWdlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5Jyk7XHJcblx0Y29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdzaXRlLW5hdmlnYXRpb24nICk7XHJcblxyXG5cdGlmICggISBjb250YWluZXIgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRidXR0b24gPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdidXR0b24nIClbMF07XHJcblx0aWYgKCAndW5kZWZpbmVkJyA9PT0gdHlwZW9mIGJ1dHRvbiApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdG1lbnUgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggJ25hdi1pbm5lcicgKVswXTtcclxuXHJcblx0Ly8gSGlkZSBtZW51IHRvZ2dsZSBidXR0b24gaWYgbWVudSBpcyBlbXB0eSBhbmQgcmV0dXJuIGVhcmx5LlxyXG5cdGlmICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBtZW51ICkge1xyXG5cdFx0YnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRtZW51LnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnICk7XHJcblx0aWYgKCAtMSA9PT0gbWVudS5jbGFzc05hbWUuaW5kZXhPZiggJ25hdi1tZW51JyApICkge1xyXG5cdFx0bWVudS5jbGFzc05hbWUgKz0gJyBuYXYtbWVudSc7XHJcblx0fVxyXG5cclxuXHRidXR0b24ub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAtMSAhPT0gY29udGFpbmVyLmNsYXNzTmFtZS5pbmRleE9mKCAndG9nZ2xlZCcgKSApIHtcclxuXHRcdFx0aWYocGFnZUJvZHlbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZW51LW9wZW4nKSkge1xyXG5cdFx0XHRcdHBhZ2VCb2R5WzBdLmNsYXNzTGlzdC5yZW1vdmUoJ21lbnUtb3BlbicpO1xyXG5cdFx0XHR9XHJcblx0XHQvL1x0cGFnZUJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnIG1lbnUtb3BlbicpO1xyXG5cdFx0XHRjb250YWluZXIuY2xhc3NOYW1lID0gY29udGFpbmVyLmNsYXNzTmFtZS5yZXBsYWNlKCAnIHRvZ2dsZWQnLCAnJyApO1xyXG5cdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICdmYWxzZScgKTtcclxuXHRcdFx0bWVudS5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyApO1xyXG5cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHBhZ2VCb2R5WzBdLmNsYXNzTGlzdC5hZGQoJ21lbnUtb3BlbicpO1xyXG5cdFx0XHRjb250YWluZXIuY2xhc3NOYW1lICs9ICcgdG9nZ2xlZCc7XHJcblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ3RydWUnICk7XHJcblx0XHRcdG1lbnUuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICd0cnVlJyApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIEdldCBhbGwgdGhlIGxpbmsgZWxlbWVudHMgd2l0aGluIHRoZSBtZW51LlxyXG5cdGxpbmtzICAgID0gbWVudS5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2EnICk7XHJcblxyXG5cdC8vIEVhY2ggdGltZSBhIG1lbnUgbGluayBpcyBmb2N1c2VkIG9yIGJsdXJyZWQsIHRvZ2dsZSBmb2N1cy5cclxuXHRmb3IgKCBpID0gMCwgbGVuID0gbGlua3MubGVuZ3RoOyBpIDwgbGVuOyBpKysgKSB7XHJcblx0XHRsaW5rc1tpXS5hZGRFdmVudExpc3RlbmVyKCAnZm9jdXMnLCB0b2dnbGVGb2N1cywgdHJ1ZSApO1xyXG5cdFx0bGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lciggJ2JsdXInLCB0b2dnbGVGb2N1cywgdHJ1ZSApO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0cyBvciByZW1vdmVzIC5mb2N1cyBjbGFzcyBvbiBhbiBlbGVtZW50LlxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIHRvZ2dsZUZvY3VzKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIE1vdmUgdXAgdGhyb3VnaCB0aGUgYW5jZXN0b3JzIG9mIHRoZSBjdXJyZW50IGxpbmsgdW50aWwgd2UgaGl0IC5uYXYtbWVudS5cclxuXHRcdHdoaWxlICggLTEgPT09IHNlbGYuY2xhc3NOYW1lLmluZGV4T2YoICduYXYtbWVudScgKSApIHtcclxuXHJcblx0XHRcdC8vIE9uIGxpIGVsZW1lbnRzIHRvZ2dsZSB0aGUgY2xhc3MgLmZvY3VzLlxyXG5cdFx0XHRpZiAoICdsaScgPT09IHNlbGYudGFnTmFtZS50b0xvd2VyQ2FzZSgpICkge1xyXG5cdFx0XHRcdGlmICggLTEgIT09IHNlbGYuY2xhc3NOYW1lLmluZGV4T2YoICdmb2N1cycgKSApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xhc3NOYW1lID0gc2VsZi5jbGFzc05hbWUucmVwbGFjZSggJyBmb2N1cycsICcnICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xhc3NOYW1lICs9ICcgZm9jdXMnO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZiA9IHNlbGYucGFyZW50RWxlbWVudDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRvZ2dsZXMgYGZvY3VzYCBjbGFzcyB0byBhbGxvdyBzdWJtZW51IGFjY2VzcyBvbiB0YWJsZXRzLlxyXG5cdCAqL1xyXG5cdCggZnVuY3Rpb24oIGNvbnRhaW5lciApIHtcclxuXHRcdHZhciB0b3VjaFN0YXJ0Rm4sIGksXHJcblx0XHRcdHBhcmVudExpbmsgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCggJy5tZW51LWl0ZW0taGFzLWNoaWxkcmVuID4gYSwgLnBhZ2VfaXRlbV9oYXNfY2hpbGRyZW4gPiBhJyApO1xyXG5cclxuXHRcdGlmICggJ29udG91Y2hzdGFydCcgaW4gd2luZG93ICkge1xyXG5cdFx0XHR0b3VjaFN0YXJ0Rm4gPSBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHR2YXIgbWVudUl0ZW0gPSB0aGlzLnBhcmVudE5vZGUsIGk7XHJcblxyXG5cdFx0XHRcdGlmICggISBtZW51SXRlbS5jbGFzc0xpc3QuY29udGFpbnMoICdmb2N1cycgKSApIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbWVudUl0ZW0ucGFyZW50Tm9kZS5jaGlsZHJlbi5sZW5ndGg7ICsraSApIHtcclxuXHRcdFx0XHRcdFx0aWYgKCBtZW51SXRlbSA9PT0gbWVudUl0ZW0ucGFyZW50Tm9kZS5jaGlsZHJlbltpXSApIHtcclxuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRtZW51SXRlbS5wYXJlbnROb2RlLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5yZW1vdmUoICdmb2N1cycgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdG1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoICdmb2N1cycgKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bWVudUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSggJ2ZvY3VzJyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgcGFyZW50TGluay5sZW5ndGg7ICsraSApIHtcclxuXHRcdFx0XHRwYXJlbnRMaW5rW2ldLmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydEZuLCBmYWxzZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSggY29udGFpbmVyICkgKTtcclxufSApKCk7XHJcbiIsIi8qIHN0aWNreSBNZW51XG4gICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgkKSB7XG4gIC8vaWYgKCQod2luZG93KS53aWR0aCgpID49IDk5Mikge1xuXG4gICAgLy8gaW5pdCBzdGlja3kgbWVudVxuICAgIHZhciBsYXN0U2Nyb2xsUG9zaXRpb24gPSAwO1xuICAgIGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAvLyQoXCJib2R5XCIpLmFkZENsYXNzKFwiaGFzLXN0aWNreS1tZW51XCIpO1xuXG4gICAgaWYgKGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA+IDEyMCkge1xuICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoXCJzdGlja3ktbWVudVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJzdGlja3ktbWVudVwiKTtcbiAgICB9XG4gICAgbGFzdFNjcm9sbFBvc2l0aW9uID0gY3VycmVudFNjcm9sbFBvc2l0aW9uO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICBjdXJyZW50U2Nyb2xsUG9zaXRpb24gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICBpZiAoY3VycmVudFNjcm9sbFBvc2l0aW9uID4gMTIwKSB7XG4gICAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKFwic3RpY2t5LW1lbnVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcInN0aWNreS1tZW51XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA+IGxhc3RTY3JvbGxQb3NpdGlvbikge1xuICAgICAgICBqUXVlcnkoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic2Nyb2xsLXVwXCIpO1xuICAgICAgICBqUXVlcnkoXCJib2R5XCIpLmFkZENsYXNzKFwic2Nyb2xsLWRvd25cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqUXVlcnkoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic2Nyb2xsLWRvd25cIik7XG4gICAgICAgIGpRdWVyeShcImJvZHlcIikuYWRkQ2xhc3MoXCJzY3JvbGwtdXBcIik7XG4gICAgICB9XG4gICAgICBsYXN0U2Nyb2xsUG9zaXRpb24gPSBjdXJyZW50U2Nyb2xsUG9zaXRpb247XG4gICAgfSk7XG4gIC8vfVxuICBcbiAgLyogKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgKlxuICAqIEV4dHJhLWNvbmYgZm9yIG9uZXBhZ2VzXG4gICpcbiAgKiAqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuLyogIGpRdWVyeShcIi5tZW51LWl0ZW0gYVwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgbWVudUl0ZW0gPSBqUXVlcnkodGhpcykuYXR0cignaHJlZicpO1xuXG4gICAgICBqUXVlcnkoJy5tYWluLW5hdmlnYXRpb24nKS5yZW1vdmVDbGFzcygndG9nZ2xlZCcpO1xuICAgICAgalF1ZXJ5KCdib2R5JykucmVtb3ZlQ2xhc3MoJ21lbnUtdG9nZ2xlZCcpO1xuXG4gICAgICBqUXVlcnkoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZG9jdW1lbnQuYm9keV0pLmFuaW1hdGUoe1xuICAgICAgICAgIHNjcm9sbFRvcDogalF1ZXJ5KG1lbnVJdGVtKS5vZmZzZXQoKS50b3AtMTAwXG4gICAgICB9LCA4MDApLmRlbGF5KDIwMCk7XG4gIH0pOyovXG59KTsiLCIvKipcclxuICogRmlsZSBza2lwLWxpbmstZm9jdXMtZml4LmpzLlxyXG4gKlxyXG4gKiBIZWxwcyB3aXRoIGFjY2Vzc2liaWxpdHkgZm9yIGtleWJvYXJkIG9ubHkgdXNlcnMuXHJcbiAqXHJcbiAqIExlYXJuIG1vcmU6IGh0dHBzOi8vZ2l0LmlvL3ZXZHIyXHJcbiAqL1xyXG4oIGZ1bmN0aW9uKCkge1xyXG5cdHZhciBpc0llID0gLyh0cmlkZW50fG1zaWUpL2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApO1xyXG5cclxuXHRpZiAoIGlzSWUgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJiYgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgKSB7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGlkID0gbG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoIDEgKSxcclxuXHRcdFx0XHRlbGVtZW50O1xyXG5cclxuXHRcdFx0aWYgKCAhICggL15bQS16MC05Xy1dKyQvLnRlc3QoIGlkICkgKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggaWQgKTtcclxuXHJcblx0XHRcdGlmICggZWxlbWVudCApIHtcclxuXHRcdFx0XHRpZiAoICEgKCAvXig/OmF8c2VsZWN0fGlucHV0fGJ1dHRvbnx0ZXh0YXJlYSkkL2kudGVzdCggZWxlbWVudC50YWdOYW1lICkgKSApIHtcclxuXHRcdFx0XHRcdGVsZW1lbnQudGFiSW5kZXggPSAtMTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGVsZW1lbnQuZm9jdXMoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgZmFsc2UgKTtcclxuXHR9XHJcbn0gKSgpO1xyXG4iLCJqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gXHQvKmpRdWVyeShcIi5zbGlkZXItYWN0aXZpdGllc1wiKS5vd2xDYXJvdXNlbCh7XHJcblx0XHRsb29wOiBmYWxzZSxcclxuXHRcdG5hdjogdHJ1ZSxcclxuXHRcdGRvdHM6IGZhbHNlLFxyXG5cdFx0YXV0b3BsYXk6IGZhbHNlLFxyXG5cdFx0bW91c2VEcmFnOiB0cnVlLFxyXG5cdFx0dG91Y2hEcmFnOiB0cnVlLFxyXG5cdFx0cmVzcG9uc2l2ZSA6IHtcclxuXHRcdCAgICAwIDoge1xyXG5cdFx0ICAgICAgICBpdGVtczogMSxcclxuXHRcdCAgICB9LFxyXG5cdFx0ICAgIDc2OCA6IHtcclxuXHRcdCAgICAgICAgaXRlbXM6IDIsXHJcblx0XHQgICAgfSxcclxuXHRcdCAgICA5OTIgOiB7XHJcblx0XHQgICAgICAgIGl0ZW1zOiAzLFxyXG5cdFx0ICAgIH0sXHJcblx0XHQgICAgIDEyMDAgOiB7XHJcblx0XHQgICAgXHRpdGVtczogNCxcclxuXHRcdCAgICB9XHJcblx0XHR9XHJcblx0fSk7Ki9cclxuXHJcblx0aWYgKGxvY2F0aW9uLmhhc2gpIGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5oYXNoO1xyXG5cclxuXHRpZiAoalF1ZXJ5LmNvb2tpZSgnaGlkZWNvb2tpZScpICE9IFwiaGlkZGVuXCIgKSB7XHJcblx0XHQkKCcjY29va2llYmFubmVyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdH1cclxuXHJcblx0aWYgKGpRdWVyeS5jb29raWUoJ2hpZGVwb3B1cCcpICE9IFwiaGlkZGVuXCIgKSB7XHJcblx0XHQkKCcjcG9wdXAnKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0fVxyXG5cdFxyXG5cdCQoJyNjb29raWViYW5uZXIgYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkrKDM2MCoyNCo2MCo2MCoxMDAwKSk7XHJcbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiaGlkZWNvb2tpZVwiICsgXCI9XCIgKyBcImhpZGRlblwiICsgXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvR01UU3RyaW5nKCk7XHJcblxyXG4gICAgICAkKCcjY29va2llYmFubmVyJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdH0pO1xyXG5cdFxyXG5cdC8vIGpRdWVyeShcIi5wb3B1cC1jbG9zZSwgLnBvcHVwLWJnXCIpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgLy8gICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAvLyAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpKyg2MCo2MCoxMDAwKSk7XHJcbiAgLy8gICAgIGRvY3VtZW50LmNvb2tpZSA9IFwiaGlkZXBvcHVwXCIgKyBcIj1cIiArIFwiaGlkZGVuXCIgKyBcIjsgZXhwaXJlcz1cIiArIGRhdGUudG9HTVRTdHJpbmcoKTtcclxuXHQgIFxyXG5cdC8vICAgalF1ZXJ5KCcjcG9wdXAnKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblx0Ly8gfSk7XHJcblxyXG59KVxyXG5cclxualF1ZXJ5KFwiLm1lbnUtYW5jaG9yIGFcIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIG1lbnVJdGVtID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2hyZWYnKTtcclxuXHJcbiAgICBqUXVlcnkoJyNzaXRlLW5hdmlnYXRpb24nKS5yZW1vdmVDbGFzcygndG9nZ2xlZCcpO1xyXG4gICAgalF1ZXJ5KCdib2R5JykucmVtb3ZlQ2xhc3MoJ21lbnUtdG9nZ2xlZCcpO1xyXG5cclxuICAgIGpRdWVyeShbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgc2Nyb2xsVG9wOiBqUXVlcnkobWVudUl0ZW0pLm9mZnNldCgpLnRvcFxyXG4gICAgfSwgNTAwKS5kZWxheSgyMDApO1xyXG4gICAgXHJcbiAgICBqUXVlcnkoJ2JvZHknKS5yZW1vdmVDbGFzcygnbWVudS1vcGVuJyk7XHJcbn0pO1xyXG4iXSwiZmlsZSI6InNjcmlwdHMtbWluLmpzIn0=
