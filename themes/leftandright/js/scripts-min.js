!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var n=/\+/g;function t(e){return s.raw?e:encodeURIComponent(e)}function o(e){return t(s.json?JSON.stringify(e):String(e))}function i(t,o){var i=s.raw?t:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(n," ")),s.json?JSON.parse(e):e}catch(e){}}(t);return e.isFunction(o)?o(i):i}var s=e.cookie=function(n,a,r){if(arguments.length>1&&!e.isFunction(a)){if("number"==typeof(r=e.extend({},s.defaults,r)).expires){var c=r.expires,d=r.expires=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*c)}return document.cookie=[t(n),"=",o(a),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}for(var l,u=n?void 0:{},m=document.cookie?document.cookie.split("; "):[],f=0,p=m.length;f<p;f++){var y=m[f].split("="),g=(l=y.shift(),s.raw?l:decodeURIComponent(l)),v=y.join("=");if(n===g){u=i(v,a);break}n||void 0===(v=i(v))||(u[g]=v)}return u};s.defaults={},e.removeCookie=function(n,t){return e.cookie(n,"",e.extend({},t,{expires:-1})),!e.cookie(n)}}),function(){var e,n,t,o,i,s,a;if(e=document.getElementsByTagName("body"),(n=document.getElementById("site-navigation"))&&void 0!==(t=n.getElementsByTagName("button")[0]))if(void 0!==(o=n.getElementsByClassName("nav-inner")[0])){for(o.setAttribute("aria-expanded","false"),-1===o.className.indexOf("nav-menu")&&(o.className+=" nav-menu"),t.onclick=function(){-1!==n.className.indexOf("toggled")?(e[0].classList.contains("menu-open")&&e[0].classList.remove("menu-open"),n.className=n.className.replace(" toggled",""),t.setAttribute("aria-expanded","false"),o.setAttribute("aria-expanded","false")):(e[0].classList.add("menu-open"),n.className+=" toggled",t.setAttribute("aria-expanded","true"),o.setAttribute("aria-expanded","true"))},s=0,a=(i=o.getElementsByTagName("a")).length;s<a;s++)i[s].addEventListener("focus",r,!0),i[s].addEventListener("blur",r,!0);!function(e){var n,t,o=e.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");if("ontouchstart"in window)for(n=function(e){var n,t=this.parentNode;if(t.classList.contains("focus"))t.classList.remove("focus");else{for(e.preventDefault(),n=0;n<t.parentNode.children.length;++n)t!==t.parentNode.children[n]&&t.parentNode.children[n].classList.remove("focus");t.classList.add("focus")}},t=0;t<o.length;++t)o[t].addEventListener("touchstart",n,!1)}(n)}else t.style.display="none";function r(){for(var e=this;-1===e.className.indexOf("nav-menu");)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement}}(),jQuery(document).ready(function(e){var n=0;currentScrollPosition=e(window).scrollTop(),currentScrollPosition>120?e("body").addClass("sticky-menu"):e("body").removeClass("sticky-menu"),n=currentScrollPosition,e(window).scroll(function(){currentScrollPosition=e(window).scrollTop(),currentScrollPosition>120?e("body").addClass("sticky-menu"):e("body").removeClass("sticky-menu"),currentScrollPosition>n?(jQuery("body").removeClass("scroll-up"),jQuery("body").addClass("scroll-down")):(jQuery("body").removeClass("scroll-down"),jQuery("body").addClass("scroll-up")),n=currentScrollPosition})}),/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,n=location.hash.substring(1);/^[A-z0-9_-]+$/.test(n)&&(e=document.getElementById(n))&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1),jQuery(document).ready(function(e){location.hash&&(location.href=location.hash),"hidden"!=jQuery.cookie("hidecookie")&&e("#cookiebanner").removeClass("hidden"),"hidden"!=jQuery.cookie("hidepopup")&&e("#popup").removeClass("hidden"),e("#cookiebanner button").click(function(n){var t=new Date;t.setTime(t.getTime()+31104e6),document.cookie="hidecookie=hidden; expires="+t.toGMTString(),e("#cookiebanner").addClass("hidden")})}),jQuery(".page-template-homepage .menu-anchor a").click(function(){event.preventDefault();var e="#"+jQuery(this).attr("href").split("#").pop();console.log(e),jQuery("#site-navigation").removeClass("toggled"),jQuery("body").removeClass("menu-toggled"),jQuery([document.documentElement,document.body]).animate({scrollTop:jQuery(e).offset().top},500).delay(200),jQuery("body").removeClass("menu-open")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5jb29raWUuanMiLCJuYXZpZ2F0aW9uLmpzIiwic3RpY2t5LW1lbnUuanMiLCJza2lwLWxpbmstZm9jdXMtZml4LmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJqUXVlcnkiLCIkIiwicGx1c2VzIiwiZW5jb2RlIiwicyIsImNvbmZpZyIsInJhdyIsImVuY29kZVVSSUNvbXBvbmVudCIsInN0cmluZ2lmeUNvb2tpZVZhbHVlIiwidmFsdWUiLCJqc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsIlN0cmluZyIsInJlYWQiLCJjb252ZXJ0ZXIiLCJpbmRleE9mIiwic2xpY2UiLCJyZXBsYWNlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFyc2UiLCJlIiwicGFyc2VDb29raWVWYWx1ZSIsImlzRnVuY3Rpb24iLCJjb29raWUiLCJrZXkiLCJvcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJleHBpcmVzIiwiZGF5cyIsInQiLCJEYXRlIiwic2V0TWlsbGlzZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwiZG9jdW1lbnQiLCJ0b1VUQ1N0cmluZyIsInBhdGgiLCJkb21haW4iLCJzZWN1cmUiLCJqb2luIiwicmVzdWx0IiwidW5kZWZpbmVkIiwiY29va2llcyIsInNwbGl0IiwiaSIsImwiLCJwYXJ0cyIsIm5hbWUiLCJzaGlmdCIsInJlbW92ZUNvb2tpZSIsInBhZ2VCb2R5IiwiY29udGFpbmVyIiwiYnV0dG9uIiwibWVudSIsImxpbmtzIiwibGVuIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc05hbWUiLCJvbmNsaWNrIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlRm9jdXMiLCJ0b3VjaFN0YXJ0Rm4iLCJwYXJlbnRMaW5rIiwicXVlcnlTZWxlY3RvckFsbCIsIndpbmRvdyIsIm1lbnVJdGVtIiwidGhpcyIsInBhcmVudE5vZGUiLCJwcmV2ZW50RGVmYXVsdCIsImNoaWxkcmVuIiwic3R5bGUiLCJkaXNwbGF5Iiwic2VsZiIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInBhcmVudEVsZW1lbnQiLCJyZWFkeSIsImxhc3RTY3JvbGxQb3NpdGlvbiIsImN1cnJlbnRTY3JvbGxQb3NpdGlvbiIsInNjcm9sbFRvcCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzY3JvbGwiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZWxlbWVudCIsImlkIiwibG9jYXRpb24iLCJoYXNoIiwic3Vic3RyaW5nIiwidGFiSW5kZXgiLCJmb2N1cyIsImhyZWYiLCJjbGljayIsImV2ZW50IiwiZGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwidG9HTVRTdHJpbmciLCJhdHRyIiwicG9wIiwiY29uc29sZSIsImxvZyIsImRvY3VtZW50RWxlbWVudCIsImJvZHkiLCJhbmltYXRlIiwib2Zmc2V0IiwidG9wIiwiZGVsYXkiXSwibWFwcGluZ3MiOiJDQU9DLFNBQVVBLEdBQ1ksbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUUxQ0QsT0FBTyxDQUFDLFVBQVdELEdBQ1UsaUJBQVpHLFFBRWpCQyxPQUFPRCxRQUFVSCxFQUFRSyxRQUFRLFdBR2pDTCxFQUFRTSxRQVRWLENBV0UsU0FBVUMsR0FFWCxJQUFJQyxFQUFTLE1BRWIsU0FBU0MsRUFBT0MsR0FDZixPQUFPQyxFQUFPQyxJQUFNRixFQUFJRyxtQkFBbUJILEdBTzVDLFNBQVNJLEVBQXFCQyxHQUM3QixPQUFPTixFQUFPRSxFQUFPSyxLQUFPQyxLQUFLQyxVQUFVSCxHQUFTSSxPQUFPSixJQWtCNUQsU0FBU0ssRUFBS1YsRUFBR1csR0FDaEIsSUFBSU4sRUFBUUosRUFBT0MsSUFBTUYsRUFoQjFCLFNBQTBCQSxHQUNGLElBQW5CQSxFQUFFWSxRQUFRLE9BRWJaLEVBQUlBLEVBQUVhLE1BQU0sR0FBSSxHQUFHQyxRQUFRLE9BQVEsS0FBS0EsUUFBUSxRQUFTLE9BRzFELElBS0MsT0FEQWQsRUFBSWUsbUJBQW1CZixFQUFFYyxRQUFRaEIsRUFBUSxNQUNsQ0csRUFBT0ssS0FBT0MsS0FBS1MsTUFBTWhCLEdBQUtBLEVBQ3BDLE1BQU1pQixLQUlxQkMsQ0FBaUJsQixHQUM5QyxPQUFPSCxFQUFFc0IsV0FBV1IsR0FBYUEsRUFBVU4sR0FBU0EsRUFHckQsSUFBSUosRUFBU0osRUFBRXVCLE9BQVMsU0FBVUMsRUFBS2hCLEVBQU9pQixHQUk3QyxHQUFJQyxVQUFVQyxPQUFTLElBQU0zQixFQUFFc0IsV0FBV2QsR0FBUSxDQUdqRCxHQUErQixpQkFGL0JpQixFQUFVekIsRUFBRTRCLE9BQU8sR0FBSXhCLEVBQU95QixTQUFVSixJQUVyQkssUUFBc0IsQ0FDeEMsSUFBSUMsRUFBT04sRUFBUUssUUFBU0UsRUFBSVAsRUFBUUssUUFBVSxJQUFJRyxLQUN0REQsRUFBRUUsZ0JBQWdCRixFQUFFRyxrQkFBMkIsTUFBUEosR0FHekMsT0FBUUssU0FBU2IsT0FBUyxDQUN6QnJCLEVBQU9zQixHQUFNLElBQUtqQixFQUFxQkMsR0FDdkNpQixFQUFRSyxRQUFVLGFBQWVMLEVBQVFLLFFBQVFPLGNBQWdCLEdBQ2pFWixFQUFRYSxLQUFVLFVBQVliLEVBQVFhLEtBQU8sR0FDN0NiLEVBQVFjLE9BQVUsWUFBY2QsRUFBUWMsT0FBUyxHQUNqRGQsRUFBUWUsT0FBVSxXQUFhLElBQzlCQyxLQUFLLElBYVIsSUFSQSxJQW5EZXRDLEVBbURYdUMsRUFBU2xCLE9BQU1tQixFQUFZLEdBSTlCQyxFQUFVUixTQUFTYixPQUFTYSxTQUFTYixPQUFPc0IsTUFBTSxNQUFRLEdBQzFEQyxFQUFJLEVBQ0pDLEVBQUlILEVBQVFqQixPQUVObUIsRUFBSUMsRUFBR0QsSUFBSyxDQUNsQixJQUFJRSxFQUFRSixFQUFRRSxHQUFHRCxNQUFNLEtBQzVCSSxHQTdEYTlDLEVBNkRDNkMsRUFBTUUsUUE1RGY5QyxFQUFPQyxJQUFNRixFQUFJZSxtQkFBbUJmLElBNkR6Q29CLEVBQVN5QixFQUFNUCxLQUFLLEtBRXJCLEdBQUlqQixJQUFReUIsRUFBTSxDQUVqQlAsRUFBUzdCLEVBQUtVLEVBQVFmLEdBQ3RCLE1BSUlnQixRQUFtQ21CLEtBQTNCcEIsRUFBU1YsRUFBS1UsTUFDMUJtQixFQUFPTyxHQUFRMUIsR0FJakIsT0FBT21CLEdBR1J0QyxFQUFPeUIsU0FBVyxHQUVsQjdCLEVBQUVtRCxhQUFlLFNBQVUzQixFQUFLQyxHQUcvQixPQURBekIsRUFBRXVCLE9BQU9DLEVBQUssR0FBSXhCLEVBQUU0QixPQUFPLEdBQUlILEVBQVMsQ0FBRUssU0FBVSxNQUM1QzlCLEVBQUV1QixPQUFPQyxNQVduQixXQUNDLElBQUk0QixFQUFVQyxFQUFXQyxFQUFRQyxFQUFNQyxFQUFPVixFQUFHVyxFQUtqRCxHQUhBTCxFQUFXaEIsU0FBU3NCLHFCQUFxQixTQUN6Q0wsRUFBWWpCLFNBQVN1QixlQUFnQiwwQkFPaEMsS0FETEwsRUFBU0QsRUFBVUsscUJBQXNCLFVBQVcsSUFRcEQsUUFBSyxLQUhMSCxFQUFPRixFQUFVTyx1QkFBd0IsYUFBYyxJQUd2RCxDQWdDQSxJQTNCQUwsRUFBS00sYUFBYyxnQkFBaUIsVUFDOUIsSUFBTU4sRUFBS08sVUFBVS9DLFFBQVMsY0FDbkN3QyxFQUFLTyxXQUFhLGFBR25CUixFQUFPUyxRQUFVLFlBQ1YsSUFBTVYsRUFBVVMsVUFBVS9DLFFBQVMsWUFDckNxQyxFQUFTLEdBQUdZLFVBQVVDLFNBQVMsY0FDakNiLEVBQVMsR0FBR1ksVUFBVUUsT0FBTyxhQUc5QmIsRUFBVVMsVUFBWVQsRUFBVVMsVUFBVTdDLFFBQVMsV0FBWSxJQUMvRHFDLEVBQU9PLGFBQWMsZ0JBQWlCLFNBQ3RDTixFQUFLTSxhQUFjLGdCQUFpQixXQUdwQ1QsRUFBUyxHQUFHWSxVQUFVRyxJQUFJLGFBQzFCZCxFQUFVUyxXQUFhLFdBQ3ZCUixFQUFPTyxhQUFjLGdCQUFpQixRQUN0Q04sRUFBS00sYUFBYyxnQkFBaUIsVUFRaENmLEVBQUksRUFBR1csR0FIYkQsRUFBV0QsRUFBS0cscUJBQXNCLE1BR2IvQixPQUFRbUIsRUFBSVcsRUFBS1gsSUFDekNVLEVBQU1WLEdBQUdzQixpQkFBa0IsUUFBU0MsR0FBYSxHQUNqRGIsRUFBTVYsR0FBR3NCLGlCQUFrQixPQUFRQyxHQUFhLElBNEIvQyxTQUFVaEIsR0FDWCxJQUFJaUIsRUFBY3hCLEVBQ2pCeUIsRUFBYWxCLEVBQVVtQixpQkFBa0IsNERBRTFDLEdBQUssaUJBQWtCQyxPQWtCdEIsSUFqQkFILEVBQWUsU0FBVWxELEdBQ3hCLElBQWdDMEIsRUFBNUI0QixFQUFXQyxLQUFLQyxXQUVwQixHQUFPRixFQUFTVixVQUFVQyxTQUFVLFNBVW5DUyxFQUFTVixVQUFVRSxPQUFRLGFBVm9CLENBRS9DLElBREE5QyxFQUFFeUQsaUJBQ0kvQixFQUFJLEVBQUdBLEVBQUk0QixFQUFTRSxXQUFXRSxTQUFTbkQsU0FBVW1CLEVBQ2xENEIsSUFBYUEsRUFBU0UsV0FBV0UsU0FBU2hDLElBRy9DNEIsRUFBU0UsV0FBV0UsU0FBU2hDLEdBQUdrQixVQUFVRSxPQUFRLFNBRW5EUSxFQUFTVixVQUFVRyxJQUFLLFdBTXBCckIsRUFBSSxFQUFHQSxFQUFJeUIsRUFBVzVDLFNBQVVtQixFQUNyQ3lCLEVBQVd6QixHQUFHc0IsaUJBQWtCLGFBQWNFLEdBQWMsR0F2Qi9ELENBMEJHakIsUUF2RkZDLEVBQU95QixNQUFNQyxRQUFVLE9BdUN4QixTQUFTWCxJQUlSLElBSEEsSUFBSVksRUFBT04sTUFHRixJQUFNTSxFQUFLbkIsVUFBVS9DLFFBQVMsYUFHakMsT0FBU2tFLEVBQUtDLFFBQVFDLGlCQUNwQixJQUFNRixFQUFLbkIsVUFBVS9DLFFBQVMsU0FDbkNrRSxFQUFLbkIsVUFBWW1CLEVBQUtuQixVQUFVN0MsUUFBUyxTQUFVLElBRW5EZ0UsRUFBS25CLFdBQWEsVUFJcEJtQixFQUFPQSxFQUFLRyxlQXpFZixHQWdIQXJGLE9BQU9xQyxVQUFVaUQsTUFBTSxTQUFVckYsR0FJN0IsSUFBSXNGLEVBQXFCLEVBQ3pCQyxzQkFBd0J2RixFQUFFeUUsUUFBUWUsWUFHOUJELHNCQUF3QixJQUMxQnZGLEVBQUUsUUFBUXlGLFNBQVMsZUFFbkJ6RixFQUFFLFFBQVEwRixZQUFZLGVBRXhCSixFQUFxQkMsc0JBRXJCdkYsRUFBRXlFLFFBQVFrQixPQUFPLFdBQ2ZKLHNCQUF3QnZGLEVBQUV5RSxRQUFRZSxZQUM5QkQsc0JBQXdCLElBQzFCdkYsRUFBRSxRQUFReUYsU0FBUyxlQUVuQnpGLEVBQUUsUUFBUTBGLFlBQVksZUFFcEJILHNCQUF3QkQsR0FDMUJ2RixPQUFPLFFBQVEyRixZQUFZLGFBQzNCM0YsT0FBTyxRQUFRMEYsU0FBUyxpQkFFeEIxRixPQUFPLFFBQVEyRixZQUFZLGVBQzNCM0YsT0FBTyxRQUFRMEYsU0FBUyxjQUUxQkgsRUFBcUJDLDBCQTZCZixrQkFBa0JLLEtBQU1DLFVBQVVDLFlBRWhDMUQsU0FBU3VCLGdCQUFrQmMsT0FBT0wsa0JBQzlDSyxPQUFPTCxpQkFBa0IsYUFBYyxXQUN0QyxJQUNDMkIsRUFER0MsRUFBS0MsU0FBU0MsS0FBS0MsVUFBVyxHQUd6QixnQkFBZ0JQLEtBQU1JLEtBSS9CRCxFQUFVM0QsU0FBU3VCLGVBQWdCcUMsTUFHekIsd0NBQXdDSixLQUFNRyxFQUFRYixXQUM5RGEsRUFBUUssVUFBWSxHQUdyQkwsRUFBUU0sV0FFUCxHQUlMdEcsT0FBT3FDLFVBQVVpRCxNQUFNLFNBQVVyRixHQXlCNUJpRyxTQUFTQyxPQUFNRCxTQUFTSyxLQUFPTCxTQUFTQyxNQUVULFVBQS9CbkcsT0FBT3dCLE9BQU8sZUFDakJ2QixFQUFFLGlCQUFpQjBGLFlBQVksVUFHRSxVQUE5QjNGLE9BQU93QixPQUFPLGNBQ2pCdkIsRUFBRSxVQUFVMEYsWUFBWSxVQUd6QjFGLEVBQUUsd0JBQXdCdUcsTUFBTSxTQUFTQyxHQUNwQyxJQUFJQyxFQUFPLElBQUl4RSxLQUNmd0UsRUFBS0MsUUFBUUQsRUFBS0UsVUFBVSxTQUM1QnZFLFNBQVNiLE9BQVMsOEJBQStDa0YsRUFBS0csY0FFdEU1RyxFQUFFLGlCQUFpQnlGLFNBQVMsY0FhbEMxRixPQUFPLDBDQUEwQ3dHLE1BQU0sV0FDbkRDLE1BQU0zQixpQkFDTixJQUVJSCxFQUFXLElBRkEzRSxPQUFPNEUsTUFBTWtDLEtBQUssUUFDVGhFLE1BQU0sS0FBS2lFLE1BR25DQyxRQUFRQyxJQUFJdEMsR0FHWjNFLE9BQU8sb0JBQW9CMkYsWUFBWSxXQUN2QzNGLE9BQU8sUUFBUTJGLFlBQVksZ0JBRTNCM0YsT0FBTyxDQUFDcUMsU0FBUzZFLGdCQUFpQjdFLFNBQVM4RSxPQUFPQyxRQUFRLENBQ3ZEM0IsVUFBV3pGLE9BQU8yRSxHQUFVMEMsU0FBU0MsS0FDckMsS0FBS0MsTUFBTSxLQUVkdkgsT0FBTyxRQUFRMkYsWUFBWSIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogalF1ZXJ5IENvb2tpZSBQbHVnaW4gdjEuNC4xXG4gKiBodHRwczovL2dpdGh1Yi5jb20vY2FyaGFydGwvanF1ZXJ5LWNvb2tpZVxuICpcbiAqIENvcHlyaWdodCAyMDA2LCAyMDE0IEtsYXVzIEhhcnRsXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqL1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyBBTUQgKFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUpXG5cdFx0ZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuXHRcdC8vIE5vZGUvQ29tbW9uSlNcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIEJyb3dzZXIgZ2xvYmFsc1xuXHRcdGZhY3RvcnkoalF1ZXJ5KTtcblx0fVxufShmdW5jdGlvbiAoJCkge1xuXG5cdHZhciBwbHVzZXMgPSAvXFwrL2c7XG5cblx0ZnVuY3Rpb24gZW5jb2RlKHMpIHtcblx0XHRyZXR1cm4gY29uZmlnLnJhdyA/IHMgOiBlbmNvZGVVUklDb21wb25lbnQocyk7XG5cdH1cblxuXHRmdW5jdGlvbiBkZWNvZGUocykge1xuXHRcdHJldHVybiBjb25maWcucmF3ID8gcyA6IGRlY29kZVVSSUNvbXBvbmVudChzKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHN0cmluZ2lmeUNvb2tpZVZhbHVlKHZhbHVlKSB7XG5cdFx0cmV0dXJuIGVuY29kZShjb25maWcuanNvbiA/IEpTT04uc3RyaW5naWZ5KHZhbHVlKSA6IFN0cmluZyh2YWx1ZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcGFyc2VDb29raWVWYWx1ZShzKSB7XG5cdFx0aWYgKHMuaW5kZXhPZignXCInKSA9PT0gMCkge1xuXHRcdFx0Ly8gVGhpcyBpcyBhIHF1b3RlZCBjb29raWUgYXMgYWNjb3JkaW5nIHRvIFJGQzIwNjgsIHVuZXNjYXBlLi4uXG5cdFx0XHRzID0gcy5zbGljZSgxLCAtMSkucmVwbGFjZSgvXFxcXFwiL2csICdcIicpLnJlcGxhY2UoL1xcXFxcXFxcL2csICdcXFxcJyk7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIFJlcGxhY2Ugc2VydmVyLXNpZGUgd3JpdHRlbiBwbHVzZXMgd2l0aCBzcGFjZXMuXG5cdFx0XHQvLyBJZiB3ZSBjYW4ndCBkZWNvZGUgdGhlIGNvb2tpZSwgaWdub3JlIGl0LCBpdCdzIHVudXNhYmxlLlxuXHRcdFx0Ly8gSWYgd2UgY2FuJ3QgcGFyc2UgdGhlIGNvb2tpZSwgaWdub3JlIGl0LCBpdCdzIHVudXNhYmxlLlxuXHRcdFx0cyA9IGRlY29kZVVSSUNvbXBvbmVudChzLnJlcGxhY2UocGx1c2VzLCAnICcpKTtcblx0XHRcdHJldHVybiBjb25maWcuanNvbiA/IEpTT04ucGFyc2UocykgOiBzO1xuXHRcdH0gY2F0Y2goZSkge31cblx0fVxuXG5cdGZ1bmN0aW9uIHJlYWQocywgY29udmVydGVyKSB7XG5cdFx0dmFyIHZhbHVlID0gY29uZmlnLnJhdyA/IHMgOiBwYXJzZUNvb2tpZVZhbHVlKHMpO1xuXHRcdHJldHVybiAkLmlzRnVuY3Rpb24oY29udmVydGVyKSA/IGNvbnZlcnRlcih2YWx1ZSkgOiB2YWx1ZTtcblx0fVxuXG5cdHZhciBjb25maWcgPSAkLmNvb2tpZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBvcHRpb25zKSB7XG5cblx0XHQvLyBXcml0ZVxuXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxICYmICEkLmlzRnVuY3Rpb24odmFsdWUpKSB7XG5cdFx0XHRvcHRpb25zID0gJC5leHRlbmQoe30sIGNvbmZpZy5kZWZhdWx0cywgb3B0aW9ucyk7XG5cblx0XHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5leHBpcmVzID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHR2YXIgZGF5cyA9IG9wdGlvbnMuZXhwaXJlcywgdCA9IG9wdGlvbnMuZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG5cdFx0XHRcdHQuc2V0TWlsbGlzZWNvbmRzKHQuZ2V0TWlsbGlzZWNvbmRzKCkgKyBkYXlzICogODY0ZSs1KTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIChkb2N1bWVudC5jb29raWUgPSBbXG5cdFx0XHRcdGVuY29kZShrZXkpLCAnPScsIHN0cmluZ2lmeUNvb2tpZVZhbHVlKHZhbHVlKSxcblx0XHRcdFx0b3B0aW9ucy5leHBpcmVzID8gJzsgZXhwaXJlcz0nICsgb3B0aW9ucy5leHBpcmVzLnRvVVRDU3RyaW5nKCkgOiAnJywgLy8gdXNlIGV4cGlyZXMgYXR0cmlidXRlLCBtYXgtYWdlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgSUVcblx0XHRcdFx0b3B0aW9ucy5wYXRoICAgID8gJzsgcGF0aD0nICsgb3B0aW9ucy5wYXRoIDogJycsXG5cdFx0XHRcdG9wdGlvbnMuZG9tYWluICA/ICc7IGRvbWFpbj0nICsgb3B0aW9ucy5kb21haW4gOiAnJyxcblx0XHRcdFx0b3B0aW9ucy5zZWN1cmUgID8gJzsgc2VjdXJlJyA6ICcnXG5cdFx0XHRdLmpvaW4oJycpKTtcblx0XHR9XG5cblx0XHQvLyBSZWFkXG5cblx0XHR2YXIgcmVzdWx0ID0ga2V5ID8gdW5kZWZpbmVkIDoge30sXG5cdFx0XHQvLyBUbyBwcmV2ZW50IHRoZSBmb3IgbG9vcCBpbiB0aGUgZmlyc3QgcGxhY2UgYXNzaWduIGFuIGVtcHR5IGFycmF5XG5cdFx0XHQvLyBpbiBjYXNlIHRoZXJlIGFyZSBubyBjb29raWVzIGF0IGFsbC4gQWxzbyBwcmV2ZW50cyBvZGQgcmVzdWx0IHdoZW5cblx0XHRcdC8vIGNhbGxpbmcgJC5jb29raWUoKS5cblx0XHRcdGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUgPyBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJykgOiBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IGNvb2tpZXMubGVuZ3RoO1xuXG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHZhciBwYXJ0cyA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKSxcblx0XHRcdFx0bmFtZSA9IGRlY29kZShwYXJ0cy5zaGlmdCgpKSxcblx0XHRcdFx0Y29va2llID0gcGFydHMuam9pbignPScpO1xuXG5cdFx0XHRpZiAoa2V5ID09PSBuYW1lKSB7XG5cdFx0XHRcdC8vIElmIHNlY29uZCBhcmd1bWVudCAodmFsdWUpIGlzIGEgZnVuY3Rpb24gaXQncyBhIGNvbnZlcnRlci4uLlxuXHRcdFx0XHRyZXN1bHQgPSByZWFkKGNvb2tpZSwgdmFsdWUpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHJldmVudCBzdG9yaW5nIGEgY29va2llIHRoYXQgd2UgY291bGRuJ3QgZGVjb2RlLlxuXHRcdFx0aWYgKCFrZXkgJiYgKGNvb2tpZSA9IHJlYWQoY29va2llKSkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRyZXN1bHRbbmFtZV0gPSBjb29raWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHRjb25maWcuZGVmYXVsdHMgPSB7fTtcblxuXHQkLnJlbW92ZUNvb2tpZSA9IGZ1bmN0aW9uIChrZXksIG9wdGlvbnMpIHtcblx0XHQvLyBNdXN0IG5vdCBhbHRlciBvcHRpb25zLCB0aHVzIGV4dGVuZGluZyBhIGZyZXNoIG9iamVjdC4uLlxuXHRcdCQuY29va2llKGtleSwgJycsICQuZXh0ZW5kKHt9LCBvcHRpb25zLCB7IGV4cGlyZXM6IC0xIH0pKTtcblx0XHRyZXR1cm4gISQuY29va2llKGtleSk7XG5cdH07XG5cbn0pKTtcbiIsIi8qKlxyXG4gKiBGaWxlIG5hdmlnYXRpb24uanMuXHJcbiAqXHJcbiAqIEhhbmRsZXMgdG9nZ2xpbmcgdGhlIG5hdmlnYXRpb24gbWVudSBmb3Igc21hbGwgc2NyZWVucyBhbmQgZW5hYmxlcyBUQUIga2V5XHJcbiAqIG5hdmlnYXRpb24gc3VwcG9ydCBmb3IgZHJvcGRvd24gbWVudXMuXHJcbiAqL1xyXG4oIGZ1bmN0aW9uKCkge1xyXG5cdHZhciBwYWdlQm9keSwgY29udGFpbmVyLCBidXR0b24sIG1lbnUsIGxpbmtzLCBpLCBsZW47XHJcblxyXG5cdHBhZ2VCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKTtcclxuXHRjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ3NpdGUtbmF2aWdhdGlvbicgKTtcclxuXHJcblx0aWYgKCAhIGNvbnRhaW5lciApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGJ1dHRvbiA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2J1dHRvbicgKVswXTtcclxuXHRpZiAoICd1bmRlZmluZWQnID09PSB0eXBlb2YgYnV0dG9uICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0bWVudSA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCAnbmF2LWlubmVyJyApWzBdO1xyXG5cclxuXHQvLyBIaWRlIG1lbnUgdG9nZ2xlIGJ1dHRvbiBpZiBtZW51IGlzIGVtcHR5IGFuZCByZXR1cm4gZWFybHkuXHJcblx0aWYgKCAndW5kZWZpbmVkJyA9PT0gdHlwZW9mIG1lbnUgKSB7XHJcblx0XHRidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdG1lbnUuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICdmYWxzZScgKTtcclxuXHRpZiAoIC0xID09PSBtZW51LmNsYXNzTmFtZS5pbmRleE9mKCAnbmF2LW1lbnUnICkgKSB7XHJcblx0XHRtZW51LmNsYXNzTmFtZSArPSAnIG5hdi1tZW51JztcclxuXHR9XHJcblxyXG5cdGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIC0xICE9PSBjb250YWluZXIuY2xhc3NOYW1lLmluZGV4T2YoICd0b2dnbGVkJyApICkge1xyXG5cdFx0XHRpZihwYWdlQm9keVswXS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtb3BlbicpKSB7XHJcblx0XHRcdFx0cGFnZUJvZHlbMF0uY2xhc3NMaXN0LnJlbW92ZSgnbWVudS1vcGVuJyk7XHJcblx0XHRcdH1cclxuXHRcdC8vXHRwYWdlQm9keS5jbGFzc0xpc3QucmVtb3ZlKCcgbWVudS1vcGVuJyk7XHJcblx0XHRcdGNvbnRhaW5lci5jbGFzc05hbWUgPSBjb250YWluZXIuY2xhc3NOYW1lLnJlcGxhY2UoICcgdG9nZ2xlZCcsICcnICk7XHJcblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyApO1xyXG5cdFx0XHRtZW51LnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnICk7XHJcblxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cGFnZUJvZHlbMF0uY2xhc3NMaXN0LmFkZCgnbWVudS1vcGVuJyk7XHJcblx0XHRcdGNvbnRhaW5lci5jbGFzc05hbWUgKz0gJyB0b2dnbGVkJztcclxuXHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScgKTtcclxuXHRcdFx0bWVudS5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ3RydWUnICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gR2V0IGFsbCB0aGUgbGluayBlbGVtZW50cyB3aXRoaW4gdGhlIG1lbnUuXHJcblx0bGlua3MgICAgPSBtZW51LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnYScgKTtcclxuXHJcblx0Ly8gRWFjaCB0aW1lIGEgbWVudSBsaW5rIGlzIGZvY3VzZWQgb3IgYmx1cnJlZCwgdG9nZ2xlIGZvY3VzLlxyXG5cdGZvciAoIGkgPSAwLCBsZW4gPSBsaW5rcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcclxuXHRcdGxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoICdmb2N1cycsIHRvZ2dsZUZvY3VzLCB0cnVlICk7XHJcblx0XHRsaW5rc1tpXS5hZGRFdmVudExpc3RlbmVyKCAnYmx1cicsIHRvZ2dsZUZvY3VzLCB0cnVlICk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIG9yIHJlbW92ZXMgLmZvY3VzIGNsYXNzIG9uIGFuIGVsZW1lbnQuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gdG9nZ2xlRm9jdXMoKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gTW92ZSB1cCB0aHJvdWdoIHRoZSBhbmNlc3RvcnMgb2YgdGhlIGN1cnJlbnQgbGluayB1bnRpbCB3ZSBoaXQgLm5hdi1tZW51LlxyXG5cdFx0d2hpbGUgKCAtMSA9PT0gc2VsZi5jbGFzc05hbWUuaW5kZXhPZiggJ25hdi1tZW51JyApICkge1xyXG5cclxuXHRcdFx0Ly8gT24gbGkgZWxlbWVudHMgdG9nZ2xlIHRoZSBjbGFzcyAuZm9jdXMuXHJcblx0XHRcdGlmICggJ2xpJyA9PT0gc2VsZi50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKSB7XHJcblx0XHRcdFx0aWYgKCAtMSAhPT0gc2VsZi5jbGFzc05hbWUuaW5kZXhPZiggJ2ZvY3VzJyApICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbGFzc05hbWUgPSBzZWxmLmNsYXNzTmFtZS5yZXBsYWNlKCAnIGZvY3VzJywgJycgKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0c2VsZi5jbGFzc05hbWUgKz0gJyBmb2N1cyc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmID0gc2VsZi5wYXJlbnRFbGVtZW50O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVG9nZ2xlcyBgZm9jdXNgIGNsYXNzIHRvIGFsbG93IHN1Ym1lbnUgYWNjZXNzIG9uIHRhYmxldHMuXHJcblx0ICovXHJcblx0KCBmdW5jdGlvbiggY29udGFpbmVyICkge1xyXG5cdFx0dmFyIHRvdWNoU3RhcnRGbiwgaSxcclxuXHRcdFx0cGFyZW50TGluayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCAnLm1lbnUtaXRlbS1oYXMtY2hpbGRyZW4gPiBhLCAucGFnZV9pdGVtX2hhc19jaGlsZHJlbiA+IGEnICk7XHJcblxyXG5cdFx0aWYgKCAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgKSB7XHJcblx0XHRcdHRvdWNoU3RhcnRGbiA9IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdHZhciBtZW51SXRlbSA9IHRoaXMucGFyZW50Tm9kZSwgaTtcclxuXHJcblx0XHRcdFx0aWYgKCAhIG1lbnVJdGVtLmNsYXNzTGlzdC5jb250YWlucyggJ2ZvY3VzJyApICkge1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBtZW51SXRlbS5wYXJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aDsgKytpICkge1xyXG5cdFx0XHRcdFx0XHRpZiAoIG1lbnVJdGVtID09PSBtZW51SXRlbS5wYXJlbnROb2RlLmNoaWxkcmVuW2ldICkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdG1lbnVJdGVtLnBhcmVudE5vZGUuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSggJ2ZvY3VzJyApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bWVudUl0ZW0uY2xhc3NMaXN0LmFkZCggJ2ZvY3VzJyApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRtZW51SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCAnZm9jdXMnICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBwYXJlbnRMaW5rLmxlbmd0aDsgKytpICkge1xyXG5cdFx0XHRcdHBhcmVudExpbmtbaV0uYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNoc3RhcnQnLCB0b3VjaFN0YXJ0Rm4sIGZhbHNlICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KCBjb250YWluZXIgKSApO1xyXG59ICkoKTtcclxuIiwiLyogc3RpY2t5IE1lbnVcbiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCQpIHtcbiAgLy9pZiAoJCh3aW5kb3cpLndpZHRoKCkgPj0gOTkyKSB7XG5cbiAgICAvLyBpbml0IHN0aWNreSBtZW51XG4gICAgdmFyIGxhc3RTY3JvbGxQb3NpdGlvbiA9IDA7XG4gICAgY3VycmVudFNjcm9sbFBvc2l0aW9uID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgIC8vJChcImJvZHlcIikuYWRkQ2xhc3MoXCJoYXMtc3RpY2t5LW1lbnVcIik7XG5cbiAgICBpZiAoY3VycmVudFNjcm9sbFBvc2l0aW9uID4gMTIwKSB7XG4gICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcInN0aWNreS1tZW51XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcInN0aWNreS1tZW51XCIpO1xuICAgIH1cbiAgICBsYXN0U2Nyb2xsUG9zaXRpb24gPSBjdXJyZW50U2Nyb2xsUG9zaXRpb247XG5cbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgIGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgIGlmIChjdXJyZW50U2Nyb2xsUG9zaXRpb24gPiAxMjApIHtcbiAgICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoXCJzdGlja3ktbWVudVwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic3RpY2t5LW1lbnVcIik7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFNjcm9sbFBvc2l0aW9uID4gbGFzdFNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICAgIGpRdWVyeShcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJzY3JvbGwtdXBcIik7XG4gICAgICAgIGpRdWVyeShcImJvZHlcIikuYWRkQ2xhc3MoXCJzY3JvbGwtZG93blwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpRdWVyeShcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJzY3JvbGwtZG93blwiKTtcbiAgICAgICAgalF1ZXJ5KFwiYm9keVwiKS5hZGRDbGFzcyhcInNjcm9sbC11cFwiKTtcbiAgICAgIH1cbiAgICAgIGxhc3RTY3JvbGxQb3NpdGlvbiA9IGN1cnJlbnRTY3JvbGxQb3NpdGlvbjtcbiAgICB9KTtcbiAgLy99XG4gIFxuICAvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqXG4gICogRXh0cmEtY29uZiBmb3Igb25lcGFnZXNcbiAgKlxuICAqICoqKioqKioqKioqKioqKioqKioqKioqKioqICovXG4vKiAgalF1ZXJ5KFwiLm1lbnUtaXRlbSBhXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBtZW51SXRlbSA9IGpRdWVyeSh0aGlzKS5hdHRyKCdocmVmJyk7XG5cbiAgICAgIGpRdWVyeSgnLm1haW4tbmF2aWdhdGlvbicpLnJlbW92ZUNsYXNzKCd0b2dnbGVkJyk7XG4gICAgICBqUXVlcnkoJ2JvZHknKS5yZW1vdmVDbGFzcygnbWVudS10b2dnbGVkJyk7XG5cbiAgICAgIGpRdWVyeShbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSkuYW5pbWF0ZSh7XG4gICAgICAgICAgc2Nyb2xsVG9wOiBqUXVlcnkobWVudUl0ZW0pLm9mZnNldCgpLnRvcC0xMDBcbiAgICAgIH0sIDgwMCkuZGVsYXkoMjAwKTtcbiAgfSk7Ki9cbn0pOyIsIi8qKlxyXG4gKiBGaWxlIHNraXAtbGluay1mb2N1cy1maXguanMuXHJcbiAqXHJcbiAqIEhlbHBzIHdpdGggYWNjZXNzaWJpbGl0eSBmb3Iga2V5Ym9hcmQgb25seSB1c2Vycy5cclxuICpcclxuICogTGVhcm4gbW9yZTogaHR0cHM6Ly9naXQuaW8vdldkcjJcclxuICovXHJcbiggZnVuY3Rpb24oKSB7XHJcblx0dmFyIGlzSWUgPSAvKHRyaWRlbnR8bXNpZSkvaS50ZXN0KCBuYXZpZ2F0b3IudXNlckFnZW50ICk7XHJcblxyXG5cdGlmICggaXNJZSAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciApIHtcclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAnaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaWQgPSBsb2NhdGlvbi5oYXNoLnN1YnN0cmluZyggMSApLFxyXG5cdFx0XHRcdGVsZW1lbnQ7XHJcblxyXG5cdFx0XHRpZiAoICEgKCAvXltBLXowLTlfLV0rJC8udGVzdCggaWQgKSApICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBpZCApO1xyXG5cclxuXHRcdFx0aWYgKCBlbGVtZW50ICkge1xyXG5cdFx0XHRcdGlmICggISAoIC9eKD86YXxzZWxlY3R8aW5wdXR8YnV0dG9ufHRleHRhcmVhKSQvaS50ZXN0KCBlbGVtZW50LnRhZ05hbWUgKSApICkge1xyXG5cdFx0XHRcdFx0ZWxlbWVudC50YWJJbmRleCA9IC0xO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZWxlbWVudC5mb2N1cygpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCBmYWxzZSApO1xyXG5cdH1cclxufSApKCk7XHJcbiIsImpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCQpIHtcclxuXHJcbiBcdC8qalF1ZXJ5KFwiLnNsaWRlci1hY3Rpdml0aWVzXCIpLm93bENhcm91c2VsKHtcclxuXHRcdGxvb3A6IGZhbHNlLFxyXG5cdFx0bmF2OiB0cnVlLFxyXG5cdFx0ZG90czogZmFsc2UsXHJcblx0XHRhdXRvcGxheTogZmFsc2UsXHJcblx0XHRtb3VzZURyYWc6IHRydWUsXHJcblx0XHR0b3VjaERyYWc6IHRydWUsXHJcblx0XHRyZXNwb25zaXZlIDoge1xyXG5cdFx0ICAgIDAgOiB7XHJcblx0XHQgICAgICAgIGl0ZW1zOiAxLFxyXG5cdFx0ICAgIH0sXHJcblx0XHQgICAgNzY4IDoge1xyXG5cdFx0ICAgICAgICBpdGVtczogMixcclxuXHRcdCAgICB9LFxyXG5cdFx0ICAgIDk5MiA6IHtcclxuXHRcdCAgICAgICAgaXRlbXM6IDMsXHJcblx0XHQgICAgfSxcclxuXHRcdCAgICAgMTIwMCA6IHtcclxuXHRcdCAgICBcdGl0ZW1zOiA0LFxyXG5cdFx0ICAgIH1cclxuXHRcdH1cclxuXHR9KTsqL1xyXG5cclxuXHRpZiAobG9jYXRpb24uaGFzaCkgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLmhhc2g7XHJcblxyXG5cdGlmIChqUXVlcnkuY29va2llKCdoaWRlY29va2llJykgIT0gXCJoaWRkZW5cIiApIHtcclxuXHRcdCQoJyNjb29raWViYW5uZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0fVxyXG5cclxuXHRpZiAoalF1ZXJ5LmNvb2tpZSgnaGlkZXBvcHVwJykgIT0gXCJoaWRkZW5cIiApIHtcclxuXHRcdCQoJyNwb3B1cCcpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHR9XHJcblx0XHJcblx0JCgnI2Nvb2tpZWJhbm5lciBidXR0b24nKS5jbGljayhmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSsoMzYwKjI0KjYwKjYwKjEwMDApKTtcclxuICAgICAgZG9jdW1lbnQuY29va2llID0gXCJoaWRlY29va2llXCIgKyBcIj1cIiArIFwiaGlkZGVuXCIgKyBcIjsgZXhwaXJlcz1cIiArIGRhdGUudG9HTVRTdHJpbmcoKTtcclxuXHJcbiAgICAgICQoJyNjb29raWViYW5uZXInKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblx0fSk7XHJcblx0XHJcblx0Ly8galF1ZXJ5KFwiLnBvcHVwLWNsb3NlLCAucG9wdXAtYmdcIikuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcclxuICAvLyAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIC8vICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkrKDYwKjYwKjEwMDApKTtcclxuICAvLyAgICAgZG9jdW1lbnQuY29va2llID0gXCJoaWRlcG9wdXBcIiArIFwiPVwiICsgXCJoaWRkZW5cIiArIFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b0dNVFN0cmluZygpO1xyXG5cdCAgXHJcblx0Ly8gICBqUXVlcnkoJyNwb3B1cCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuXHQvLyB9KTtcclxuXHJcbn0pXHJcblxyXG5qUXVlcnkoXCIucGFnZS10ZW1wbGF0ZS1ob21lcGFnZSAubWVudS1hbmNob3IgYVwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgbWVudUxpbmsgPSBqUXVlcnkodGhpcykuYXR0cignaHJlZicpO1xyXG4gICAgdmFyIG1lbnVIYXNoID0gbWVudUxpbmsuc3BsaXQoJyMnKS5wb3AoKTtcclxuICAgIHZhciBtZW51SXRlbSA9IFwiI1wiICsgbWVudUhhc2g7XHJcblxyXG4gICAgY29uc29sZS5sb2cobWVudUl0ZW0pO1xyXG5cclxuXHJcbiAgICBqUXVlcnkoJyNzaXRlLW5hdmlnYXRpb24nKS5yZW1vdmVDbGFzcygndG9nZ2xlZCcpO1xyXG4gICAgalF1ZXJ5KCdib2R5JykucmVtb3ZlQ2xhc3MoJ21lbnUtdG9nZ2xlZCcpO1xyXG5cclxuICAgIGpRdWVyeShbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSkuYW5pbWF0ZSh7XHJcbiAgICAgICBzY3JvbGxUb3A6IGpRdWVyeShtZW51SXRlbSkub2Zmc2V0KCkudG9wXHJcbiAgICB9LCA1MDApLmRlbGF5KDIwMCk7XHJcbiAgICBcclxuICAgIGpRdWVyeSgnYm9keScpLnJlbW92ZUNsYXNzKCdtZW51LW9wZW4nKTtcclxufSk7XHJcbiJdLCJmaWxlIjoic2NyaXB0cy1taW4uanMifQ==
